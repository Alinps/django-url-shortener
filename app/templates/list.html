<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  {%load static%}
  <title>Your Links â€” Shortly</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{%static 'css/list.css'%}">
  <link rel="stylesheet" href="{%static 'css/navbar.css'%}">
  <link rel="stylesheet" href="{%static 'css/footer.css'%}">
</head>
<body>
{%include 'partials/navbar.html'%}
<main class="page">

  <!-- HEADER -->
  <section class="page-header">
    <h1 class="gradient-text">Your Shortened Links</h1>
    <p class="subtitle">
      Manage, monitor, and track the performance of your shortened URLs.
    </p>
      
      <div class="search-wrapper">
            <button id="searchToggle" class="search-btn">
                ğŸ” Search
            </button>

            <form method="get" id="searchForm" class="search-form hidden">
                <input
                    type="text"
                    name="q"
                    placeholder="Search by title, short link or URLâ€¦"
                    value="{{ request.GET.q }}"
                />
            </form>
      </div>
  </section>

  <!-- STATS -->
  <section class="stats">
    <div class="stat-card">
      <span class="label">Total Links</span>
      <span class="value">{{total_urls}}</span>
    </div>
    <div class="stat-card">
      <span class="label">Active Links</span>
      <span class="value green">{{active_urls}}</span>
    </div>
    <div class="stat-card">
      <span class="label">Disabled Links</span>
      <span class="value red" style="color:red;">{{disabled_urls}}</span>
    </div>
    <div class="stat-card">
      <span class="label">Total Clicks</span>
      <span class="value">{{total_clicks}}</span>
    </div>

    <div class="stat-card">
      <span class="label">Create new Short Link</span>
      <span class="value"><a href="{%url 'home'%}">+</a></span>
    </div>
  </section>

  <!-- LIST -->
  <section class="list-card">

<div class="list-header">
  <span>Short Link</span>
  <span>Title</span>
  <span>Original URL</span>
  <span>Clicks</span>
  <span>Status</span>
  <span>Actions</span>
</div>


    <!-- ROW -->
     {%for url in urls%}
   <div class="list-row">
  <span class="short">
    <a href="{% url 'redirect' url.short_code %}">
      {{ url.short_code }}
    </a>
  </span>
  <span class="title">{{url.title}}</span>

  <span class="original">{{ url.original_url }}</span>

  <span class="clicks">{{ url.click_count }}</span>

  {% if url.is_active %}
    <span class="status active">Active</span>
  {% else %}
    <span class="status inactive">Disabled</span>
  {% endif %}

  <span class="actions">
    <a class="toggle-icon {% if url.is_active %}active{% endif %}"
       href="{% url 'toggle' url.id %}">â»</a>

    <a href="{% url 'update' url.id %}" class="edit">ğŸ“</a>

    <a href="{% url 'delete' url.id %}" class="delete">ğŸ—‘</a>
    <a 
        data-url="{{ request.scheme }}://{{ request.get_host }}/redirect/{{ url.short_code }}"
        onclick="copyToClipboard(this)"
        >ğŸ”—</a>
        
  </span>
</div>

    {%endfor%}

   
  </section>

  <!-- FOOT NOTE -->
  <section class="note">
    <p>
      Tip: Keep your links organized by monitoring inactive URLs and tracking click trends.
    </p>
  </section>

</main>
{%include 'partials/footer.html'%}
<script src="{%static 'js/list.js' %}"></script>
</body>
</html>

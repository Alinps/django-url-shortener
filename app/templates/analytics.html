<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<h2>Analytics for {{ url.title }}</h2>

<p>Total clicks: {{ total_clicks }}</p>

{% if last_click %}
  <p>Last clicked: {{ last_click }}</p>
{% else %}
  <p>No clicks yet</p>
{% endif %}
<h3>Clicks Over Time</h3>
<canvas id="clickChart" height="100"></canvas>


<h3>Clicks per day</h3>
<ul>
  {% for item in daily_clicks %}
    <li>{{ item.day }} â†’ {{ item.count }}</li>
  {% empty %}
    <li>No data</li>
  {% endfor %}
</ul>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  const ctx = document.getElementById("clickChart").getContext("2d");

  const clickChart = new Chart(ctx, {
    type: "line",
    data: {
      labels: {{ days|safe }},
      datasets: [{
        label: "Clicks per day",
        data: {{ counts|safe }},
        borderColor: "#60a5fa",
        backgroundColor: "rgba(96, 165, 250, 0.15)",
        tension: 0.35,
        fill: true,
        pointRadius: 4,
        pointHoverRadius: 6,
      }]
    },
    options: {
      responsive: true,
      plugins: {
        legend: {
          display: false
        }
      },
      scales: {
        x: {
          grid: { display: false }
        },
        y: {
          beginAtZero: true,
          ticks: {
            precision: 0
          }
        }
      }
    }
  });
</script>


</body>
</html>